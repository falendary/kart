!function t(e,o,i){function l(n,s){if(!o[n]){if(!e[n]){var a="function"==typeof require&&require;if(!s&&a)return a(n,!0);if(r)return r(n,!0);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}var d=o[n]={exports:{}};e[n][0].call(d.exports,function(t){var o=e[n][1][t];return l(o?o:t)},d,d.exports,t,e,o,i)}return o[n].exports}for(var r="function"==typeof require&&require,n=0;n<i.length;n++)l(i[n]);return l}({1:[function(t,e,o){"use strict";var i=function(){function t(t,e){t.state("app",{url:"/app","abstract":!0,templateUrl:"views/shell.html",controller:"ShellController as vm"}).state("app.main",{url:"/main",templateUrl:"views/main.html",controller:"MainController as vm"}).state("app.products",{url:"/products",templateUrl:"views/products/products.html",controller:"ProductsController as vm"}).state("app.products-detail",{url:"/products/:productId",templateUrl:"views/products/products-detail.html",controller:"ProductsDetailController as vm"}).state("app.products-add",{url:"/add/product",templateUrl:"views/products/product-add.html",controller:"ProductsAddController as vm"}).state("app.reports",{url:"/reports",templateUrl:"views/reports/reports.html",controller:"ReportsController as vm"}).state("app.reports-new-chart",{url:"/reports/newChart",templateUrl:"views/reports/reports-new-chart.html",controller:"ReportsNewChartController as vm",params:{chartDataType:null}}).state("app.bills",{url:"/bills",templateUrl:"views/bills/bills-dashboard.html",controller:"BillsDashboardController as vm"}).state("app.bills-detail",{url:"/bills/:billId",templateUrl:"views/bills/bills-detail.html",controller:"BillsDetailController as vm"}).state("app.bills-add",{url:"/add/bill",templateUrl:"views/bills/bills-add.html",controller:"BillsAddController as vm"}).state("app.stats",{url:"/stats",templateUrl:"views/stats/stats.html",controller:"StatsController as vm"}).state("app.settings",{url:"/settings",templateUrl:"views/settings/settings.html",controller:"SettingsController as vm"}),console.log("Router initialized..."),e.otherwise("/app/main")}return t}();o.Routes=i},{}],2:[function(t,e,o){"use strict";var i=function(){function t(t){this.scope=t,t.$on("$destroy",this.onDestroy),t.$on("$apply",this.apply)}return t.prototype.apply=function(){this.scope.$apply()},t.prototype.onDestroy=function(){console.log("Controller destroyed")},t}();o.BaseController=i},{}],3:[function(t,e,o){var i=this&&this.__extends||function(t,e){function o(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)},l=t("./BaseController"),r=t("../models/BillModel"),n=t("../services/BillsService"),s=function(t){function e(e,o){var i=this;t.call(this,e),this.billsService=new n.BillsService,this.valid=!1,this.weekDaysList=["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],this.monthList=["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],console.log("Bills add controller initialized..."),this.state=o,this.bill=new r.Bill,this.bill.total=0,this.bill.fields=[],this.ionicDatePickerObj={titleLabel:"Дата чека",todayLabel:"Сегодня",closeLabel:"Закрыть",setLabel:"Сохранить",setButtonType:"button-assertive",todayButtonType:"button-assertive",closeButtonType:"button-assertive",inputDate:new Date,mondayFirst:!0,weekDaysList:this.weekDaysList,monthList:this.monthList,templateType:"popup",showTodayButton:"true",modalHeaderColor:"bar-positive",modalFooterColor:"bar-positive",from:new Date(2012,8,2),to:new Date(2018,8,25),callback:function(t){i.datePickerCallback(t)},dateFormat:"dd-MM-yyyy",closeOnSelect:!1}}return i(e,t),e.prototype.datePickerCallback=function(t){this.bill.billsDate=t,console.log("this.bill.fields.length",Object.keys(this.bill.fields).length),console.log(this.bill.fields);var e;for(e in this.bill.fields)this.bill.fields.hasOwnProperty(e)&&(this.bill.fields[e].removed||(this.bill.fields[e].total||0===this.bill.fields[e].total?this.valid=!0:this.valid=!1));console.log("var",this.bill.billsDate)},e.prototype.updateTotal=function(t){console.log(this.bill.fields),console.log(this.bill.fields.length),this.bill.total=0;var e;for(e in this.bill.fields)if(this.bill.fields.hasOwnProperty(e)&&!this.bill.fields[e].removed)if(this.bill.fields[e].total||0===this.bill.fields[e].total){var o=this.bill.fields[e].total+"";""!==o&&(this.bill.total=this.bill.total+parseInt(o,10),this.bill.billsDate&&(this.valid=!0))}else this.valid=!1},e.prototype.addBill=function(){var t,e=this,o=[];console.log("this.bill.fields",this.bill.fields);for(t in this.bill.fields)this.bill.fields.hasOwnProperty(t)&&(this.bill.fields[t].removed||0===this.bill.fields[t].total||o.push(this.bill.fields[t]));this.bill.fields=o,this.bill.fields.length&&this.billsService.add(this.bill).then(function(t){console.log("Bills add Controller add bill",t),e.bill=null,e.state.go("app.bills",{},{reload:!0})})},e}(l.BaseController);o.BillsAddController=s},{"../models/BillModel":17,"../services/BillsService":25,"./BaseController":2}],4:[function(t,e,o){var i=this&&this.__extends||function(t,e){function o(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)},l=t("../services/BillsService"),r=t("./BaseController"),n=function(t){function e(e){t.call(this,e),this.billsService=new l.BillsService,console.log("Bills dashboard controller initialized..."),this.currentMonth=new Date,this.getBills()}return i(e,t),e.prototype.getBills=function(){var t=this;this.billsService.getListByMonth(this.currentMonth).then(function(e){t.bills=e,console.log("this.bills",t.bills),t.apply()})},e}(r.BaseController);o.BillsDashboardController=n},{"../services/BillsService":25,"./BaseController":2}],5:[function(t,e,o){var i=this&&this.__extends||function(t,e){function o(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)},l=t("./BaseController"),r=t("../services/BillsService"),n=function(t){function e(e,o,i){t.call(this,e),this.billsService=new r.BillsService,console.log("Bills detail controller initialized..."),this.billId=i.billId,this.getBill()}return i(e,t),e.prototype.getBill=function(){var t=this;this.billsService.getByKey(this.billId).then(function(e){console.log("getBill",e),t.bill=e,t.apply()})},e}(l.BaseController);o.BillsDetailController=n},{"../services/BillsService":25,"./BaseController":2}],6:[function(t,e,o){"use strict";var i=function(){function t(){console.log("Main controller initialized...")}return t}();o.MainController=i},{}],7:[function(t,e,o){var i=this&&this.__extends||function(t,e){function o(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)},l=t("./BaseController"),r=t("../services/CategoriesService"),n=t("../services/ProductsService"),s=function(t){function e(e,o){var i=this;t.call(this,e),this.categoriesService=new r.CategoriesService,this.productsService=new n.ProductsService,this.setCategory=function(t){i.item.category=JSON.parse(JSON.stringify(t)),i.categoriesAutoComplete=[]},console.log("Item add controller..."),this.state=o,this.getCategories()}return i(e,t),e.prototype.getCategories=function(){var t=this;this.categoriesService.getList().then(function(e){t.categories=e,console.log("this.categories",t.categories),t.apply()})},e.prototype.categorySearch=function(){var t=this;""!==this.item.category.categoryName?this.categoriesService.searchCategory(this.item.category.categoryName,this.categories).then(function(e){t.categoriesAutoComplete=e,t.apply()}):this.categoriesAutoComplete=[]},e.prototype.addProduct=function(){var t=this;console.log("Product add controller, item",this.item),this.productsService.add(this.item).then(function(e){console.log("Product add controller, add response: ",e),t.item._id=e.id,t.categoriesService.addProduct(t.item.category._id,t.item).then(function(e){console.log("Product add controller, addProduct response: ",e),t.item=null,t.categoriesAutoComplete=[],console.log("work?"),e.ok&&(console.log("then",e),t.state.go("app.products"))})})},e}(l.BaseController);o.ProductsAddController=s},{"../services/CategoriesService":26,"../services/ProductsService":28,"./BaseController":2}],8:[function(t,e,o){var i=this&&this.__extends||function(t,e){function o(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)},l=t("../services/CategoriesService"),r=t("./BaseController"),n=function(t){function e(e){var o=this;t.call(this,e),this.categoriesService=new l.CategoriesService,this.categories=[],console.log("Products controller initialized..."),this.categoriesService.getList().then(function(t){o.categories=t,console.log("this.categories",o.categories),o.apply()}),console.log("$scope",e),console.log("this",this)}return i(e,t),e.prototype.toggleCategory=function(t){this.isCategoryShown(t)?this.shownCategory=null:this.shownCategory=t},e.prototype.isCategoryShown=function(t){return this.shownCategory===t},e}(r.BaseController);o.ProductsController=n},{"../services/CategoriesService":26,"./BaseController":2}],9:[function(t,e,o){var i=this&&this.__extends||function(t,e){function o(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)},l=t("../services/ProductsService"),r=t("./BaseController"),n=function(t){function e(e,o,i){t.call(this,e),this.productsService=new l.ProductsService,console.log("Product Detail controller initialized..."),this.productId=i.productId,this.getProduct()}return i(e,t),e.prototype.getProduct=function(){var t=this;this.productsService.getByKey(this.productId).then(function(e){t.product=e,t.apply()})},e}(r.BaseController);o.ProductsDetailController=n},{"../services/ProductsService":28,"./BaseController":2}],10:[function(t,e,o){"use strict";var i=function(){function t(){console.log("Reports controller initialized...")}return t}();o.ReportsController=i},{}],11:[function(t,e,o){var i=this&&this.__extends||function(t,e){function o(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)},l=t("./BaseController"),r=t("../services/ProductsService"),n=t("../services/BillsService"),s=t("../services/CategoriesService"),a=t("../services/ChartService"),c=function(t){function e(e,o,i){t.call(this,e),this.productsService=new r.ProductsService,this.billsService=new n.BillsService,this.categoriesService=new s.CategoriesService,this.chartService=new a.ChartService,this.labels=[],this.series=[],console.log("Reports new chart controller initialized..."),console.log("$stateParams",i),this.chartDataType=i.chartDataType,"lastMonth"===this.chartDataType?this.drawChartLastMonth():"lastWeek"===this.chartDataType?this.drawChartLastWeek():o.go("app.reports",{},{reload:!0})}return i(e,t),e.prototype.drawChartLastMonth=function(){var t=this;this.billsService.getListByMonth(new Date).then(function(e){console.log("data",e);var o=new Date,i="bill";t.chartType="bar",t.chartTitle="Чеки",t.viewTitle=moment().format("MMMM"),t.labels=t.chartService.getLabelsForMonth(),t.data=[],t.data=t.chartService.fillValuesForMonth(e,i,o),t.apply()})},e.prototype.drawChartLastWeek=function(){var t=this;this.billsService.getListByWeek(new Date).then(function(e){var o="bill";t.chartType="bar",t.chartTitle="Чеки";var i=new Date((new Date).setDate((new Date).getDate()-7)),l=new Date((new Date).setDate((new Date).getDate()));t.data=[],t.data=t.chartService.fillValuesForWeek(e,o,i,l),t.apply()})},e}(l.BaseController);o.ReportsNewChartController=c},{"../services/BillsService":25,"../services/CategoriesService":26,"../services/ChartService":27,"../services/ProductsService":28,"./BaseController":2}],12:[function(t,e,o){"use strict";var i=function(){function t(){console.log("Settings controller initialized...")}return t}();o.SettingsController=i},{}],13:[function(t,e,o){"use strict";var i=function(){function t(t){console.log("Shell controller initialized...")}return t}();o.ShellController=i},{}],14:[function(t,e,o){"use strict";var i=function(){function t(){console.log("Stats controller initialized...")}return t}();o.StatsController=i},{}],15:[function(t,e,o){var i=t("../models/ProductModel"),l=function(){function t(t){var e=this;this.restrict="AE",this.replace=!0,this.scope={field:"=",updatePrice:"&"},this.templateUrl="views/directives/bills-field-template.html",this.link=function(t,o,l){var r=o.find(".field-btn-control.plus"),n=o.find(".field-btn-control.minus"),s=parseInt(l.field.split("vm.bill.fields.field")[1],10)+1;t.field||(t.field=new i.Product,t.field.total=0),t.autoCalcTotal=function(){void 0!==t.field.price&&void 0!==t.field.quantity&&(t.field.total=t.field.price*t.field.quantity,t.updatePrice())},t.validateInput=function(t){var e=new RegExp("^[0-9]*$"),o=String.fromCharCode(t.charCode?t.charCode:t.which);return console.log("key",e.test(o)),e.test(o)?void 0:(console.log("test prevent"),t.preventDefault(),!1)},t.addField=function(){r.removeClass("active"),n.addClass("active");var i=e.$compile('<div data-bill-add-field data-field="vm.bill.fields.field'+s+'"data-update-price="vm.updateTotal()"></div>')(t.$parent);o.after(i)},t.removeField=function(){t.field.removed=!0,t.field.total=0,t.field.price=0,t.field.quantity=0,t.updatePrice(),o.remove()}},this.$compile=t}return t.factory=function(e){return new t(e)},t}();o.BillAddFieldDirective=l},{"../models/ProductModel":19}],16:[function(t,e,o){var i=function(){function t(){this.restrict="AE",this.scope={entityDataSet:"=",chartType:"=",chartTitle:"="},this.link=function(t,e,o){var i=t.entityDataSet;i.unshift(t.chartTitle);window.c3.generate({bindto:"#chart",data:{columns:[i],type:t.chartType},bar:{width:{ratio:1}},zoom:{enabled:!0}})}}return t.factory=function(){return new t},t}();o.C3Directive=i},{}],17:[function(t,e,o){"use strict";var i=function(){function t(){}return t.prototype.deserialize=function(t){return this._id=t._id,this._rev=t._rev,this.id=t.id,this.billsDate=t.billsDate,this.total=t.total,this.fields=t.fields,this},t}();o.Bill=i},{}],18:[function(t,e,o){var i=function(){function t(){}return t.prototype.deserialize=function(t){return this._id=t._id,this._rev=t._rev,this.id=t.id,this.categoryName=t.categoryName,this.keyName=t.keyName,this.products=t.products,this},t}();o.Category=i},{}],19:[function(t,e,o){var i=function(){function t(){}return t.prototype.deserialize=function(t){return this._id=t._id,this._rev=t._rev,this.id=t.id,this.productName=t.productName,this.category=t.category,this.price=t.price,this.quantity=t.quantity,this.total=t.total,this.removed=t.removed,this},t}();o.Product=i},{}],20:[function(t,e,o){var i=function(){function t(){}return t.prototype.deserialize=function(t){return this.id=t.id,this._id=t._id,this._rev=t._rev,this.ok=t.ok,this.error=t.error,this},t}();o.Response=i},{}],21:[function(t,e,o){var i=t("../models/BillModel"),l=t("../models/ResponseModel"),r=function(){function t(){}return t.prototype.getList=function(){},t.prototype.getByKey=function(t){return new Promise(function(e){window.kart.db.get(t).then(function(t){e((new i.Bill).deserialize(t))})})},t.prototype.add=function(t){return window.kart.db.put({_id:"bill"+(new Date).getTime(),createDate:new Date,billsDate:t.billsDate,fields:t.fields,total:t.total,type:"bill"}).then(function(t){return(new l.Response).deserialize(t)})},t.prototype.update=function(t,e){},t.prototype["delete"]=function(t){},t.prototype.getListByRange=function(t,e){return window.kart.db.query({map:function(o,i){new Date(o.billsDate)>t&&new Date(o.billsDate)<e&&i(o)}}).then(function(t){var e,o=[];for(e=0;e<t.rows.length;e+=1)o.push(t.rows[e].key);return o})},t}();o.BillsRepository=r},{"../models/BillModel":17,"../models/ResponseModel":20}],22:[function(t,e,o){var i=t("../models/CategoryModel"),l=t("../models/ResponseModel"),r=function(){function t(){}return t.prototype.getList=function(t,e){var o=[];return new Promise(function(t){window.kart.db.query(function(t,e){t.categoryName&&e(t)},{type:"category",include_docs:!0}).then(function(e){o=e.rows.map(function(t){return(new i.Category).deserialize(t.doc)}),t(o)})})},t.prototype.getByKey=function(t){},t.prototype.add=function(t){},t.prototype.update=function(t,e){},t.prototype["delete"]=function(t){},t.prototype.addProduct=function(t,e){return new Promise(function(o,i){return window.kart.db.get(t).then(function(i){return i.products?i.products.push(e):i.products=[e],window.kart.db.put({_id:t,_rev:i._rev,categoryName:i.categoryName,keyName:i.keyName,products:i.products}).then(function(t){return o((new l.Response).deserialize(t))})})})},t}();o.CategoriesRepository=r},{"../models/CategoryModel":18,"../models/ResponseModel":20}],23:[function(t,e,o){var i=function(){function t(){}return t.prototype.createCategories=function(){var t,e=[{id:1,name:"Овощи",keyName:"vegetables"},{id:2,name:"Фрукты и ягоды",keyName:"fruit"},{id:3,name:"Грибы",keyName:"mushrooms"},{id:4,name:"Яйца и молочные продукты",keyName:"eggs"},{id:5,name:"Мясные продукты",keyName:"meat"},{id:6,name:"Рыба и морепродукты",keyName:"fish"},{id:7,name:"Орехи и сухофрукты",keyName:"nuts"},{id:8,name:"Мука и мучные изделия",keyName:"baking"},{id:9,name:"Крупы и каши",keyName:"cereals"},{id:10,name:"Кондитерские изделия",keyName:"confectionery"},{id:11,name:"Специи и пряности",keyName:"spices"},{id:12,name:"Безалкогольные напитки",keyName:"softDrinks"},{id:13,name:"Алкогольные напитки",keyName:"alcohol"},{id:14,name:"Сырье и добавки",keyName:"rawMaterials"}];for(t=0;t<e.length;t+=1)window.kart.db.put({_id:"category"+t,categoryName:e[t].name,keyName:e[t].keyName,type:"category"})},t.prototype.createProducts=function(){},t}();o.InitDatabaseRepository=i},{}],24:[function(t,e,o){var i=t("../models/ProductModel"),l=t("../models/ResponseModel"),r=function(){function t(){}return t.prototype.getList=function(){},t.prototype.getByKey=function(t){return new Promise(function(e){window.kart.db.get(t).then(function(t){e((new i.Product).deserialize(t))})})},t.prototype.add=function(t){return window.kart.db.put({_id:"product"+(new Date).getTime(),productName:t.productName,category:t.category,type:"product"}).then(function(t){return(new l.Response).deserialize(t)})},t.prototype.update=function(t,e){},t.prototype["delete"]=function(t){},t}();o.ProductsRepository=r},{"../models/ProductModel":19,"../models/ResponseModel":20}],25:[function(t,e,o){var i=t("../repositories/BillsRepository"),l=function(){function t(){this.billsRepository=new i.BillsRepository}return t.prototype.getList=function(){return this.billsRepository.getList()},t.prototype.getByKey=function(t){return this.billsRepository.getByKey(t)},t.prototype.add=function(t){return this.billsRepository.add(t)},t.prototype.update=function(t,e){return this.billsRepository.update(t,e)},t.prototype["delete"]=function(t){return this.billsRepository["delete"](t)},t.prototype.getListByRange=function(t,e){return this.billsRepository.getListByRange(t,e)},t.prototype.getListByWeek=function(t){var e=new Date((new Date).setDate(t.getDate()-7)),o=t;return this.billsRepository.getListByRange(e,o)},t.prototype.getListByMonth=function(t){var e=new Date(t.getFullYear(),t.getMonth(),1),o=new Date(t.getFullYear(),t.getMonth()+1,0);return this.billsRepository.getListByRange(e,o)},t}();o.BillsService=l},{"../repositories/BillsRepository":21}],26:[function(t,e,o){var i=t("../repositories/CategoriesRepository"),l=function(){function t(){this.categoriesRepository=new i.CategoriesRepository}return t.prototype.getList=function(){return this.categoriesRepository.getList()},t.prototype.getByKey=function(t){return this.categoriesRepository.getByKey(t)},t.prototype.add=function(t){return this.categoriesRepository.add(t)},t.prototype.update=function(t,e){return this.categoriesRepository.update(t,e)},t.prototype["delete"]=function(t){return this.categoriesRepository["delete"](t)},t.prototype.searchCategory=function(t,e){return new Promise(function(o,i){var l=e.filter(function(e){return-1!==e.categoryName.toLowerCase().indexOf(t.toLowerCase())?!0:void 0});setTimeout(function(){o(l)},100)})},t.prototype.addProduct=function(t,e){return this.categoriesRepository.addProduct(t,e)},t}();o.CategoriesService=l},{"../repositories/CategoriesRepository":22}],27:[function(t,e,o){var i=function(){function t(){}return t.prototype.getDaysInMonth=function(t){var e=t||new Date;return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()},t.prototype.getLabelsForMonth=function(t){var e,o=this.getDaysInMonth(),i=[];for(e=1;o>=e;e+=1)i.push(e.toString());return i},t.prototype.fillValuesForMonth=function(t,e,o){var i,l,r,n=[],s=this.getDaysInMonth(o);for(i=0;s>i;i+=1)n.push(0);if("bill"===e)for(l=0;l<t.length;l+=1)r=new Date(t[l].billsDate).getDate(),n[r]>0?n[r]=n[r]+t[l].total:t[l].total?n[r]=t[l].total:n[r]=0;return n},t.prototype.fillValuesForWeek=function(t,e,o,i){var l,r,n,s=[],a=[],c=o.getDate(),d=i.getDate();for(l=c;d>=l;l+=1)s[l]=0;if("bill"===e)for(r=0;r<t.length;r+=1)n=new Date(t[r].billsDate).getDate(),s[n]>0?s[n]=s[n]+t[r].total:t[r].total?s[n]=t[r].total:s[n]=0;return a=s.filter(function(){return!0})},t}();o.ChartService=i},{}],28:[function(t,e,o){var i=t("../repositories/ProductsRepository"),l=function(){function t(){this.productsRepository=new i.ProductsRepository}return t.prototype.getList=function(){return this.productsRepository.getList()},t.prototype.getByKey=function(t){return this.productsRepository.getByKey(t)},t.prototype.add=function(t){return this.productsRepository.add(t)},t.prototype.update=function(t,e){return this.productsRepository.update(t,e)},t.prototype["delete"]=function(t){return this.productsRepository["delete"](t)},t}();o.ProductsService=l},{"../repositories/ProductsRepository":24}],29:[function(t,e,o){var i=t("./app/Routes"),l=t("./app/controllers/MainController"),r=t("./app/controllers/ShellController"),n=t("./app/repositories/InitDatabaseRepository"),s=t("./app/controllers/StatsController"),a=t("./app/controllers/SettingsController"),c=t("./app/controllers/ProductsController"),d=t("./app/controllers/ProductsDetailController"),p=t("./app/controllers/ProductsAddController"),u=t("./app/controllers/BillsDashboardController"),v=t("./app/controllers/BillsAddController"),h=t("./app/controllers/BillsDetailController"),f=t("./app/controllers/ReportsController"),m=t("./app/controllers/ReportsNewChartController"),y=t("./app/directives/BillAddFieldDirective"),g=t("./app/directives/C3Directive"),b=angular.module("app",["ionic","ionic-datepicker","ngCordova"]);b.config(["$stateProvider","$urlRouterProvider",i.Routes]),b.run([function(){console.log("App initialized..."),window.kart=window.kart||{},window.kart.db=new PouchDB("kart",{adapter:"websql"});var t=new n.InitDatabaseRepository;t.createCategories(),t.createProducts(),console.log("window.kart.db",window.kart.db)}]),b.controller("ShellController",["$scope",r.ShellController]),b.controller("MainController",["$scope",l.MainController]),b.controller("StatsController",["$scope",s.StatsController]),b.controller("SettingsController",["$scope",a.SettingsController]),b.controller("ProductsController",["$scope",c.ProductsController]),b.controller("ProductsDetailController",["$scope","$state","$stateParams",d.ProductsDetailController]),b.controller("ProductsAddController",["$scope","$state",p.ProductsAddController]),b.controller("BillsDashboardController",["$scope",u.BillsDashboardController]),b.controller("BillsAddController",["$scope","$state",v.BillsAddController]),b.controller("BillsDetailController",["$scope","$state","$stateParams",h.BillsDetailController]),b.controller("ReportsController",["$scope",f.ReportsController]),b.controller("ReportsNewChartController",["$scope","$state","$stateParams",m.ReportsNewChartController]),b.directive("billAddField",["$compile",y.BillAddFieldDirective.factory]),b.directive("c3Directive",[g.C3Directive.factory]),t("./templates.min.js")},{"./app/Routes":1,"./app/controllers/BillsAddController":3,"./app/controllers/BillsDashboardController":4,"./app/controllers/BillsDetailController":5,"./app/controllers/MainController":6,"./app/controllers/ProductsAddController":7,"./app/controllers/ProductsController":8,"./app/controllers/ProductsDetailController":9,"./app/controllers/ReportsController":10,"./app/controllers/ReportsNewChartController":11,"./app/controllers/SettingsController":12,"./app/controllers/ShellController":13,"./app/controllers/StatsController":14,"./app/directives/BillAddFieldDirective":15,"./app/directives/C3Directive":16,"./app/repositories/InitDatabaseRepository":23,"./templates.min.js":30}],30:[function(t,e,o){!function(t){try{t=angular.module("app")}catch(e){t=angular.module("app",[])}t.run(["$templateCache",function(t){t.put("views/main.html",'<ion-view view-title="Главная"><ion-content><h1>Главная</h1></ion-content></ion-view>')}])}(),function(t){try{t=angular.module("app")}catch(e){t=angular.module("app",[])}t.run(["$templateCache",function(t){t.put("views/shell.html",'<ion-side-menus enable-menu-with-back-views="false"><ion-side-menu-content><ion-nav-bar class="bar-stable"><ion-nav-back-button></ion-nav-back-button><ion-nav-buttons side="left"><button class="button button-icon button-clear ion-navicon" menu-toggle="left"></button></ion-nav-buttons></ion-nav-bar><ion-nav-view></ion-nav-view></ion-side-menu-content><ion-side-menu side="left"><ion-header-bar class="bar-stable"><h1 class="title">Kart</h1></ion-header-bar><ion-content><ion-list><ion-item menu-close href="" data-ui-sref="app.main">Главная</ion-item><ion-item menu-close href="" data-ui-sref="app.products">Продукты</ion-item><ion-item menu-close href="" data-ui-sref="app.bills">Чеки</ion-item><ion-item menu-close href="" data-ui-sref="app.reports">Отчеты</ion-item><ion-item menu-close href="" data-ui-sref="app.stats">Статистика</ion-item><ion-item menu-close href="" data-ui-sref="app.settings">Настройки</ion-item></ion-list></ion-content></ion-side-menu></ion-side-menus>')}])}(),function(t){try{t=angular.module("app")}catch(e){t=angular.module("app",[])}t.run(["$templateCache",function(t){t.put("views/bills/bills-add.html",'<ion-view view-title="Новый чек"><ion-content><div class="bill-header"><div class="row"><div class="col-10 bill-column"></div><div class="col-40 bill-column">Продукт</div><div class="col-20 bill-column justify-content-center">Цена<br>1 шт.</div><div class="col-10 bill-column">Кол.</div><div class="col-20 bill-column justify-content-center">Итог</div></div></div><div class="bill-body"><div class="fields-holder"><div data-bill-add-field data-field="vm.bill.fields.field1" data-update-price="vm.updateTotal()"></div></div><div class="row"><div class="col-50"><div class="bill-date-holder"><ionic-datepicker input-obj="vm.ionicDatePickerObj"><button class="button button-positive"><span data-ng-show="vm.bill.billsDate" data-ng-bind="vm.bill.billsDate | date:\'dd.MM.yyyy\'"></span> <span data-ng-hide="vm.bill.billsDate" data-ng-bind="::vm.ionicDatePickerObj.titleLabel"></span></button></ionic-datepicker></div></div><div class="col-50"><div class="total-holder"><p class="caption">Всего:</p><p class="total">{{vm.bill.total}}р.</p></div></div></div></div><div class="bill-footer"><button class="button save-check pull-right {{vm.valid ? \'\' : \'disabled\'}}" data-ng-click="vm.addBill()">Сохранить чек</button></div></ion-content></ion-view>')}])}(),function(t){try{t=angular.module("app")}catch(e){t=angular.module("app",[])}t.run(["$templateCache",function(t){t.put("views/bills/bills-dashboard.html",'<ion-view view-title="Чеки"><ion-content><button data-ui-sref="app.bills-add" class="button">Добавить чек</button><div class="bills-holder"><div class="card"><div class="list"><div class="item item-divider"><div class="row"><div class="col-50">Дата</div><div class="col-50">Сумма покупок</div></div></div><div class="bill-item item" data-ng-repeat="bill in vm.bills"><div class="row"><div class="col-50"><p class="bill-date" data-ng-bind="::bill.billsDate | date:\'dd.MM.yyyy\'"></p></div><div class="col-25"><p class="bill-total">{{bill.total}}р.</p></div><div class="col-25"><button class="button" data-ui-sref="app.bills-detail( {billId: bill._id} )"><div class="ion-ios-arrow-right" data-pack="ios" data-tags="chevron"></div></button></div></div></div></div></div></div></ion-content></ion-view>')}])}(),function(t){try{t=angular.module("app")}catch(e){t=angular.module("app",[])}t.run(["$templateCache",function(t){t.put("views/bills/bills-detail.html",'<ion-view view-title="Детальная"><ion-content><div class="bills-holder" data-ng-if="vm.bill"><div class="bill-header"><div class="row"><div class="col-10 bill-column"></div><div class="col-40 bill-column">Продукт</div><div class="col-20 bill-column justify-content-center">Цена<br>1 шт.</div><div class="col-10 bill-column">Кол.</div><div class="col-20 bill-column justify-content-center">Итог</div></div></div><div class="bill-body"><div class="fields-holder"><div class="item row" data-ng-repeat="field in vm.bill.fields"><div class="col-50 bill-column"><input type="text" placeholder="" data-ng-model="field.name"></div><div class="col-20 bill-column"><input type="text" placeholder="" data-ng-model="field.price" class="text-center"></div><div class="col-10 bill-column"><input type="text" placeholder="" data-ng-model="field.quantity" class="text-center"></div><div class="col-20 bill-column"><input type="text" placeholder="" data-ng-model="field.total" class="text-center"></div></div></div><div class="row"><div class="col-50"><div class="bill-date-holder"><span data-ng-show="vm.bill.billsDate" data-ng-bind="vm.bill.billsDate | date:\'dd.MM.yyyy\'"></span></div></div><div class="col-50"><div class="total-holder"><p class="caption">Всего:</p><p class="total">{{vm.bill.total}}р.</p></div></div></div></div><div class="bill-footer"><button class="button" data-ui-sref="app.bills">Вернуться</button></div></div></ion-content></ion-view>')}])}(),function(t){try{t=angular.module("app")}catch(e){t=angular.module("app",[])}t.run(["$templateCache",function(t){t.put("views/directives/bills-field-template.html",'<div class="item row"><div class="col-10 bill-column justify-content-center"><a href="" data-ng-click="addField()" class="field-btn-control plus active"><i class="ion-plus-circled"></i></a> <a href="" data-ng-click="removeField()" class="field-btn-control minus"><i class="ion-close-circled"></i></a></div><div class="col-40 bill-column"><input type="text" placeholder="" data-ng-model="field.name"></div><div class="col-20 bill-column"><input type="text" placeholder="" data-ng-model="field.price" class="text-center" data-ng-keypress="validateInput($event)" data-ng-change="autoCalcTotal()"></div><div class="col-10 bill-column"><input type="text" placeholder="" data-ng-model="field.quantity" class="text-center" data-ng-keypress="validateInput($event)" data-ng-change="autoCalcTotal()"></div><div class="col-20 bill-column"><input type="text" placeholder="" data-ng-model="field.total" class="text-center" data-ng-keypress="validateInput($event)" data-ng-change="updatePrice()"></div></div>')}])}(),function(t){try{t=angular.module("app")}catch(e){t=angular.module("app",[])}t.run(["$templateCache",function(t){t.put("views/products/product-add.html",'<ion-view view-title="Новый товар"><ion-content><div class="list list-inset"><label class="item item-input"><input type="text" placeholder="Название товара" data-ng-model="vm.item.productName"></label><label class="item item-input"><input type="search" placeholder="Категория товара" data-ng-model="vm.item.category.categoryName" data-ng-change="vm.categorySearch()"></label></div><div class="list"><li class="item" data-ng-repeat="category in vm.categoriesAutoComplete" data-ng-bind="::category.categoryName" data-ng-click="vm.setCategory(category)"></li></div><button class="button" style="float: right; margin-right: .6em" data-ng-click="vm.addProduct()">Добавить</button></ion-content></ion-view>');
}])}(),function(t){try{t=angular.module("app")}catch(e){t=angular.module("app",[])}t.run(["$templateCache",function(t){t.put("views/products/product.html",'<ion-view view-title="{{\'Имя товара\'}}"><ion-content><ion-list><ion-item ng-repeat="playlist in playlists" href="#/app/playlists/{{playlist.id}}">{{playlist.title}}</ion-item></ion-list></ion-content></ion-view>')}])}(),function(t){try{t=angular.module("app")}catch(e){t=angular.module("app",[])}t.run(["$templateCache",function(t){t.put("views/products/products-detail.html",'<ion-view view-title="{{vm.product.productName}}"><ion-content><div class="card"><div class="row"><div class="col-40">Название</div><div class="col-60">{{vm.product.productName}}</div></div><div class="row"><div class="col-40">Категория</div><div class="col-60">{{vm.product.category.categoryName}}</div></div></div><div class="bill-footer"><button class="button" data-ui-sref="app.products">Вернуться</button></div></ion-content></ion-view>')}])}(),function(t){try{t=angular.module("app")}catch(e){t=angular.module("app",[])}t.run(["$templateCache",function(t){t.put("views/products/products.html",'<ion-view><ion-content><ion-list><button data-ui-sref="app.products-add" class="button">Добавить товар</button><div data-ng-repeat="category in vm.categories"><ion-item class="item-stable" data-ng-click="vm.toggleCategory(category)" data-ng-class="{active: vm.isCategoryShown(category)}"><i class="icon" data-ng-class="vm.isCategoryShown(category) ? \'ion-minus\' : \'ion-plus\'"></i> &nbsp; {{category.categoryName}}</ion-item><ion-item class="item-accordion" data-ng-repeat="product in category.products" data-ng-show="vm.isCategoryShown(category)"><div class="row"><div class="col-80">{{product.productName}}</div><div class="col-20"><button class="button" data-ui-sref="app.products-detail( {productId: product._id} )"><div class="ion-ios-arrow-right" data-pack="ios" data-tags="chevron"></div></button></div></div></ion-item></div></ion-list></ion-content></ion-view>')}])}(),function(t){try{t=angular.module("app")}catch(e){t=angular.module("app",[])}t.run(["$templateCache",function(t){t.put("views/reports/reports-new-chart.html",'<ion-view><ion-nav-title class="capitalize">{{vm.viewTitle}}</ion-nav-title><ion-content><div class="card" data-ng-if="vm.data"><div id="chart" data-c3-directive data-entity-data-set="vm.data" data-chart-type="vm.chartType" data-chart-title="vm.chartTitle"></div></div></ion-content></ion-view>')}])}(),function(t){try{t=angular.module("app")}catch(e){t=angular.module("app",[])}t.run(["$templateCache",function(t){t.put("views/reports/reports.html",'<ion-view view-title="Отчеты"><ion-content><div class="list reports-options-list"><div class="item item-divider report-option">Расходы</div><div class="item report-option"><div class="row"><div class="col-10 report-list-icon"><i class="icon ion-ios-pie"></i></div><div class="col-60 option-caption">Отчет за последний</div><span class="col-30"><button data-ui-sref="app.reports-new-chart({chartDataType: \'lastMonth\'})" class="button report-month-option">месяц</button> <button data-ui-sref="app.reports-new-chart({chartDataType: \'lastWeek\'})" class="button report-week-option">неделю</button></span></div></div><div class="item report-option"><div class="row"><div class="col-10 report-list-icon"><i class="icon ion-ios-nutrition"></i></div><div class="col-50">Отчет по продукту</div></div></div><div class="item report-option"><div class="row"><div class="col-10 report-list-icon"><i class="icon ion-ios-box"></i></div><div class="col-50">Отчет по категории</div></div></div><div class="item item-divider report-option">Потребление</div><div class="item report-option"><div class="row"><div class="col-10 report-list-icon"><i class="icon ion-ios-pie"></i></div><div class="col-60 option-caption">Отчет за последний</div><span class="col-30"><button data-ui-sref="app.reports-new-chart({chartDataType: \'lastMonth\'})" class="button report-month-option">месяц</button> <button data-ui-sref="app.reports-new-chart({chartDataType: \'lastWeek\'})" class="button report-week-option">неделю</button></span></div></div><div class="item report-option"><div class="row"><div class="col-10 report-list-icon"><i class="icon ion-ios-nutrition"></i></div><div class="col-50">Отчет по продукту</div></div></div><div class="item report-option"><div class="row"><div class="col-10 report-list-icon"><i class="icon ion-ios-box"></i></div><div class="col-50">Отчет по категории</div></div></div><div class="item item-divider report-option">Разное</div><div class="item report-option"><div class="row"><div class="col-10 report-list-icon"><i class="icon ion-ios-color-wand"></i></div><div class="col-50">Построить свой отчет</div></div></div></div></ion-content></ion-view>')}])}(),function(t){try{t=angular.module("app")}catch(e){t=angular.module("app",[])}t.run(["$templateCache",function(t){t.put("views/settings/settings.html",'<ion-view view-title="Настройки"><ion-content><h1>Настройки</h1></ion-content></ion-view>')}])}(),function(t){try{t=angular.module("app")}catch(e){t=angular.module("app",[])}t.run(["$templateCache",function(t){t.put("views/stats/stats.html",'<ion-view view-title="Статистика"><ion-content><h1>Статистика</h1></ion-content></ion-view>')}])}()},{}]},{},[29]);